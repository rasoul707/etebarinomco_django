{% extends 'base_form.html' %}

{% block title %}مرحله نهایی: تایید قوانین{% endblock %}

{% block form_width %}max-w-2xl{% endblock %}

{% block content %}
<div class="text-center mb-8">
    <h1 class="text-2xl sm:text-3xl font-bold text-gray-800 dark:text-gray-200">تایید قوانین و مقررات</h1>
    <p class="text-gray-500 mt-2 text-sm sm:text-base dark:text-gray-400">لطفاً قوانین را مطالعه کرده و در صورت موافقت، تایید نمایید.</p>
</div>
<div id="terms-box" class="h-64 overflow-y-auto border p-4 rounded-md bg-gray-50 dark:bg-gray-800 text-justify text-gray-700 dark:text-gray-300 leading-relaxed border-gray-200 dark:border-gray-600">
    <h3 class="font-bold mb-2">📜 قوانین و مقررات اعتبارینو بازرگانی محمدی</h3>
    <p>کاربر گرامی خواهشمندیم پیش از استفاده از خدمات “اعتبارینو بازرگانی محمدی” این قوانین را با دقت مطالعه فرمایید. ثبت‌نام و استفاده از خدمات به منزله پذیرش کامل این قوانین است.</p>
    <hr class="my-4 border-gray-300 dark:border-gray-600">
    <h3 class="font-bold mt-4 mb-2">۱. شرایط استفاده از خدمات</h3>
    <p><strong>1.1.</strong> استفاده از خدمات اعتبارینو برای افراد بالای ۱۸ سال تمام و دارای اهلیت قانونی امکان‌پذیر است.</p>
    <p><strong>1.2.</strong> کاربر موظف است اطلاعات هویتی، مالی و اعتباری خود را به‌صورت صحیح و کامل ثبت نماید. مسئولیت صحت اطلاعات ارائه‌شده بر عهده کاربر است.</p>
    <p><strong>1.3.</strong> هرگونه جعل هویت، ارائه اطلاعات نادرست یا تلاش برای سوء‌استفاده از سیستم، پیگرد قانونی دارد.</p>
    <h3 class="font-bold mt-4 mb-2">۲. مقررات درخواست و تخصیص اعتبار</h3>
    <p><strong>2.1.</strong> تخصیص اعتبار مشروط به بررسی و تایید مدارک هویتی، اعتباری و توان بازپرداخت توسط بازرگانی محمدی است.</p>
    <p><strong>2.2.</strong> اعتبار تخصیص‌یافته صرفاً در چارچوب تعیین‌شده توسط بازرگانی محمدی و در بازه زمانی مشخص قابل استفاده است.</p>
    <p><strong>2.3.</strong> کاربر موظف است اقساط و تعهدات مالی خود را در موعد مقرر پرداخت نماید. در غیر این صورت، بازرگانی محمدی حق اعمال جرائم دیرکرد، تعلیق حساب یا اقدامات قانونی را برای خود محفوظ می‌داند.</p>
    <h3 class="font-bold mt-4 mb-2">۳. حریم خصوصی و محرمانگی</h3>
    <p><strong>3.1.</strong> اطلاعات شخصی و مالی کاربران نزد بازرگانی محمدی محرمانه بوده و بدون حکم قضایی یا درخواست مراجع ذی‌صلاح منتشر نخواهد شد.</p>
    <p><strong>3.2.</strong> کاربر موافقت می‌کند که اطلاعات او برای اعتبارسنجی و تحلیل ریسک با سامانه‌های مرتبط (بانک‌ها، شرکت‌های اعتبارسنجی و ...) به اشتراک گذاشته شود.</p>
    <h3 class="font-bold mt-4 mb-2">۴. مسئولیت‌ها</h3>
    <p><strong>4.1.</strong> کاربر مسئول حفظ اطلاعات کاربری و رمز عبور خود است. هرگونه استفاده از حساب کاربری شما به منزله اقدام شما تلقی می‌شود.</p>
    <p><strong>4.2.</strong> بازرگانی محمدی در قبال خسارات ناشی از استفاده نادرست کاربر از خدمات، مسئولیتی نخواهد داشت.</p>
    <h3 class="font-bold mt-4 mb-2">۵. تغییرات قوانین</h3>
    <p><strong>5.1.</strong> بازرگانی محمدی مجاز است در هر زمان نسبت به تغییر یا بروزرسانی قوانین اقدام نماید. نسخه بروز شده از طریق پلتفرم اطلاع‌رسانی خواهد شد و ادامه استفاده از خدمات به منزله پذیرش تغییرات است.</p>
    <h3 class="font-bold mt-4 mb-2">۶. حل اختلاف</h3>
    <p><strong>6.1.</strong> در صورت بروز اختلاف، ابتدا تلاش خواهد شد موضوع از طریق مذاکره حل شود. در غیر این صورت، موضوع در مراجع صالح قضایی جمهوری اسلامی ایران پیگیری خواهد شد.</p>
    <h3 class="font-bold mt-4 mb-2">تایید قوانین</h3>
    <p>با ثبت‌نام و استفاده از خدمات “اعتبارینو بازرگانی محمدی”، شما تایید می‌نمایید که این قوانین را مطالعه کرده‌اید و تمامی مفاد آن را پذیرفته‌اید.</p>
</div>
<form method="post" class="mt-6">
    {% csrf_token %}
    <div class="flex items-center p-4 border rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800">
        <input type="checkbox" name="{{ form.terms_accepted.name }}" id="{{ form.terms_accepted.id_for_label }}" class="h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500" disabled>
        <label for="{{ form.terms_accepted.id_for_label }}" class="mr-3 text-gray-700 dark:text-gray-300 cursor-pointer transition-colors disabled:opacity-50">
            {{ form.terms_accepted.label }}
        </label>
    </div>
    {% if form.terms_accepted.errors %}
        <p class="text-red-500 text-xs mt-1 dark:text-red-400">{{ form.terms_accepted.errors.0 }}</p>
    {% endif %}
    <button id="submit-button" type="submit" class="w-full mt-6 bg-green-600 text-white font-bold py-3 px-4 rounded-lg transition-all disabled:bg-gray-400 disabled:cursor-not-allowed">
        ثبت و ادامه
    </button>
</form>
{% endblock %}

{% block scripts %}
<script>
    const termsBox = document.getElementById('terms-box');
    const checkbox = document.getElementById('id_terms_accepted');
    const submitButton = document.getElementById('submit-button');
    const checkboxLabel = document.querySelector('label[for="id_terms_accepted"]');

    termsBox.addEventListener('scroll', () => {
        if (termsBox.scrollTop + termsBox.clientHeight >= termsBox.scrollHeight - 10) {
            checkbox.disabled = false;
            checkboxLabel.classList.remove('disabled:opacity-50');
        }
    });

    checkbox.addEventListener('change', () => {
        submitButton.disabled = !checkbox.checked;
    });
</script>
{% endblock %}